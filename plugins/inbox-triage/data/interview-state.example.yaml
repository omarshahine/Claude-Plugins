# inbox-triage Interview State
# Tracks session progress for resume capability
# Supports questions-first flow with batch execution

# Current session (null if no active session)
session: null
# When active, contains:
#   started: "2025-01-01T10:00:00Z"     # Session start time
#   mode: "collecting"                   # collecting | executing | learning | completed
#   total_threads: 15                    # Total threads to process
#   collected_count: 0                   # How many decisions collected
#   last_thread_index: 0                 # Last processed thread index
#   processed_thread_ids: []             # Thread IDs already processed

# Collected decisions (questions-first flow)
# Persisted for resume capability - all decisions before execution
collected_decisions: []
# Example entry:
# - emailId: "email-123"
#   threadId: "thread-456"
#   from:
#     name: "Chase Bank"
#     email: "alerts@chase.com"
#     domain: "chase.com"
#   subject: "Your statement is ready"
#   receivedAt: "2025-02-02T09:30:00Z"
#
#   # What we suggested
#   suggestion:
#     action: "archive"
#     folder: "Financial"
#     folderId: "folder-789"
#     confidence: 0.85
#     reason: "Domain match: chase.com -> Financial"
#
#   # What user chose
#   decision:
#     action: "archive"           # archive, delete, keep, reminder, calendar, reply, parcel, unsubscribe
#     accepted_suggestion: true   # Did they accept our suggestion?
#     folder: "Financial"         # If archive
#     folderId: "folder-789"
#     flag: false                 # If keep with flag
#     reminderParams: null        # If reminder: { title, dueDate, list }
#     calendarParams: null        # If calendar: { title, date, duration }
#     replyParams: null           # If reply: { body, tone }
#     postAction: null            # After reminder/calendar/reply: keep | archive | delete
#     postActionFolderId: null

# Batches for sub-agent delegation (extracted from collected_decisions)
batches:
  # Package tracking - delegated to inbox-to-parcel sub-agent
  parcel: []
  # Example:
  # - emailId: "email-id-1"
  #   trackingNumber: "1Z999AA10123456784"
  #   carrier: "ups"
  #   sender: "Amazon"

  # Newsletter unsubscribe - delegated to newsletter-unsubscriber sub-agent
  unsubscribe: []
  # Example:
  # - emailIds: ["email-id-3"]
  #   domain: "uncrate.com"
  #   unsubscribeUrl: "https://uncrate.com/unsubscribe?id=xxx"

  # Reminders - delegated to inbox-to-reminder sub-agent
  reminder: []
  # Example:
  # - emailId: "email-id-4"
  #   title: "Review Chase statement"
  #   dueDate: "tomorrow 9am"
  #   list: "Budget & Finances"
  #   notes: "From: Chase Bank"

# Session statistics (updated during execution)
statistics:
  reminders_created: 0
  events_created: 0
  emails_archived: 0
  emails_deleted: 0
  emails_kept: 0
  replies_drafted: 0
  packages_added: 0
  newsletters_unsubscribed: 0

# Learning statistics (from decision recording)
learning:
  suggestions_made: 0
  suggestions_accepted: 0
  suggestions_rejected: 0
  new_patterns_detected: 0
  rules_updated: 0

# Patterns learned during this session (pending confirmation)
learned_patterns: []
# Example:
# - domain: "newdomain.com"
#   action: "archive"
#   folder: "Work"
#   observation_count: 3
#   status: "pending_confirmation"

# Last completed session summary
last_session:
  completed: null
  # When set, contains:
  #   session_id: "interview-2025-02-02-abc123"
  #   date: "2025-02-02T10:30:00Z"
  #   threads_processed: 15
  #   summary:
  #     reminders_created: 3
  #     events_created: 1
  #     emails_archived: 8
  #     emails_deleted: 2
  #     emails_kept: 1
  #     replies_drafted: 0
  #     packages_added: 2
  #     newsletters_unsubscribed: 1
  #   learning:
  #     acceptance_rate: 0.87
  #     new_patterns: 2
  #     rules_updated: 1
